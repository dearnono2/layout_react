{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/YS/Desktop/\\uB514\\uCF54\\uB4DC \\uCEF4\\uD4E8\\uD130\\uD559\\uC6D0/221013 17\\uC77C\\uCC28/layout_react/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"C:/Users/YS/Desktop/\\uB514\\uCF54\\uB4DC \\uCEF4\\uD4E8\\uD130\\uD559\\uC6D0/221013 17\\uC77C\\uCC28/layout_react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from'react';import Header from\"../common/Header\";import News from\"./News\";import Pics from\"./Pics\";import Vids from\"./Vids\";import Visual from\"./Visual\";import Btns from'./Btns';import Anime from'../../asset/Anime';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Main(){var main=useRef(null);var pos=useRef([]);var secs=null;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),Index=_useState2[0],setIndex=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),Scrolled=_useState4[0],setScrolled=_useState4[1];var getPos=function getPos(){pos.current=[];secs=main.current.querySelectorAll('.myScroll');var _iterator=_createForOfIteratorHelper(secs),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var sec=_step.value;pos.current.push(sec.offsetTop);}}catch(err){_iterator.e(err);}finally{_iterator.f();}console.log(pos.current);};var activation=function activation(){var base=-window.innerHeight/2;var scroll=window.scrollY;var btns=main.current.querySelectorAll('.scroll_navi li');setScrolled(scroll);pos.current.map(function(pos,idx){// 현재 스크롤한 값과 pos의 값을 비교해서\nif(scroll>=pos+base){var _iterator2=_createForOfIteratorHelper(btns),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var btn=_step2.value;btn.classList.remove('on');}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var _iterator3=_createForOfIteratorHelper(secs),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var sec=_step3.value;sec.classList.remove('on');}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}btns[idx].classList.add('on');secs[idx].classList.add('on');}// 버튼을 활성화\n// 일단 모두 비활성화\n// 특정 버튼을 활성\n});};useEffect(function(){getPos();// 리사이즈 이벤트가 발생하면 스크롤 값을 다시 불러온다.\nwindow.addEventListener('resize',getPos);window.addEventListener('scroll',activation);return function(){window.removeEventListener('resize',getPos);window.removeEventListener('scroll',activation);};},[]);useEffect(function(){new Anime(window,{prop:'scroll',value:pos.current[Index],duration:500});},[Index]);return/*#__PURE__*/_jsxs(\"main\",{ref:main,children:[/*#__PURE__*/_jsx(Header,{type:'main'}),/*#__PURE__*/_jsx(Visual,{}),/*#__PURE__*/_jsx(News,{}),/*#__PURE__*/_jsx(Pics,{Scrolled:Scrolled,start:pos.current[2]}),/*#__PURE__*/_jsx(Vids,{}),/*#__PURE__*/_jsx(Btns,{setIndex:setIndex})]});}export default Main;","map":{"version":3,"names":["useEffect","useRef","useState","Header","News","Pics","Vids","Visual","Btns","Anime","Main","main","pos","secs","Index","setIndex","Scrolled","setScrolled","getPos","current","querySelectorAll","sec","push","offsetTop","console","log","activation","base","window","innerHeight","scroll","scrollY","btns","map","idx","btn","classList","remove","add","addEventListener","removeEventListener","prop","value","duration"],"sources":["C:/Users/YS/Desktop/디코드 컴퓨터학원/221013 17일차/layout_react/src/components/main/Main.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\r\n\r\nimport Header from \"../common/Header\";\r\nimport News from \"./News\";\r\nimport Pics from \"./Pics\";\r\nimport Vids from \"./Vids\";\r\nimport Visual from \"./Visual\";\r\nimport Btns from './Btns';\r\nimport Anime from '../../asset/Anime';\r\n\r\nfunction Main() {\r\n\r\n  const main = useRef(null);\r\n  const pos = useRef([]);\r\n  let secs = null;\r\n\r\n  const [Index, setIndex] = useState(0);\r\n  const [Scrolled, setScrolled] = useState(0);\r\n\r\n  const getPos = () => {\r\n    pos.current = [];\r\n    secs = main.current.querySelectorAll('.myScroll');\r\n    for (const sec of secs) pos.current.push(sec.offsetTop);\r\n    console.log(pos.current);\r\n  }\r\n\r\n  const activation = () => {\r\n    const base = -window.innerHeight / 2;\r\n    const scroll = window.scrollY;\r\n    const btns = main.current.querySelectorAll('.scroll_navi li');\r\n\r\n    setScrolled(scroll);\r\n    pos.current.map((pos, idx) => {\r\n      // 현재 스크롤한 값과 pos의 값을 비교해서\r\n      if(scroll >= pos + base) {\r\n        for(const btn of btns) btn.classList.remove('on');\r\n        for(const sec of secs) sec.classList.remove('on');\r\n        btns[idx].classList.add('on');\r\n        secs[idx].classList.add('on');\r\n      }\r\n      // 버튼을 활성화\r\n      // 일단 모두 비활성화\r\n      // 특정 버튼을 활성\r\n\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    getPos();\r\n    // 리사이즈 이벤트가 발생하면 스크롤 값을 다시 불러온다.\r\n    window.addEventListener('resize', getPos);\r\n    window.addEventListener('scroll', activation);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', getPos);\r\n      window.removeEventListener('scroll', activation);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    new Anime(window, {\r\n      prop: 'scroll',\r\n      value: pos.current[Index],\r\n      duration: 500,\r\n    })\r\n  }, [Index]);\r\n\r\n\r\n  return(\r\n    <main ref={main}>\r\n      <Header type={'main'} />\r\n      <Visual />\r\n      <News />\r\n      <Pics Scrolled={Scrolled} start={pos.current[2]} />\r\n      <Vids />\r\n      <Btns setIndex={setIndex} />\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;"],"mappings":"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"},"metadata":{},"sourceType":"module"}